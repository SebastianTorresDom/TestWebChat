<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <title>Embedded Messaging</title>
</head>
<body>
    <h1>Bienvenido a nuestro Chat</h1>
    <p>Por favor, interactúa con el chat en la esquina.</p>

    <!-- Embedded Messaging Script -->
    <script type="text/javascript">
        function initEmbeddedMessaging() {
            try {
                // Configuración del idioma
                embeddedservice_bootstrap.settings.language = 'es_MX';

                // Inicialización del servicio embebido
                embeddedservice_bootstrap.init(
                    '00DDX000000H03p', // Salesforce Org ID
                    'All_Tech', // Deployment Name
                    'https://efgmexico--devsandbox.sandbox.my.site.com/ESWAllTech1733365787738', // Experience Cloud Site URL
                    {
                        scrt2URL: 'https://efgmexico--devsandbox.sandbox.my.salesforce-scrt.com' // URL segura
                    }
                );
            } catch (err) {
                console.error('Error al cargar Embedded Messaging:', err);
            }
        }
    </script>

    <!-- Solución: Carga del script con la API de JavaScript -->
    <script>
        (function loadEmbeddedMessagingScript() {
            const script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = 'https://efgmexico--devsandbox.sandbox.my.site.com/ESWAllTech1733365787738/assets/js/bootstrap.min.js';
            script.onload = initEmbeddedMessaging;
            script.onerror = function () {
                console.error('Error al cargar el script de Embedded Messaging.');
            };
            document.body.appendChild(script);
        })();
    </script>
</body>
</html>
